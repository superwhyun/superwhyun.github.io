<!doctype html>
<html>

<head>

  <title>
    
      유니티 3D - 기본 | U2PIA
    
  </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <!-- Use Atom -->
  <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:3000/feed.xml" title="U2PIA" />
  <!-- RSS-v2.0
  <link href="/rss-feed.xml" type="application/rss+xml" rel="alternate" title="U2PIA | Joy of learning"/>
  //-->


  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Source+Code+Pro">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">

  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  <!-- Google Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'superwhyun3@gmail.com', 'auto');
  ga('send', 'pageview');
</script>


  <!-- Use Jekyll SEO plugin -->
  <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>유니티 3D - 기본 | U2PIA</title>
<meta name="generator" content="Jekyll v3.6.2" />
<meta property="og:title" content="유니티 3D - 기본" />
<meta name="author" content="Wook Hyun" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="거의 생초짜가 전문강사님의 강의를 듣고 다시 해 보며 부딪혀 본 내용을 기록한 것입니다. 백문이 불여일견입니다. 책 아무리 들여다보는 것 보다, 직접 하는 것이 낫고.. 혼자 하는 것 보다 전문가의 도움을 받는 것이 훨씬 시간을 절약합니다." />
<meta property="og:description" content="거의 생초짜가 전문강사님의 강의를 듣고 다시 해 보며 부딪혀 본 내용을 기록한 것입니다. 백문이 불여일견입니다. 책 아무리 들여다보는 것 보다, 직접 하는 것이 낫고.. 혼자 하는 것 보다 전문가의 도움을 받는 것이 훨씬 시간을 절약합니다." />
<link rel="canonical" href="http://0.0.0.0:3000/documentation/unity-basics.html" />
<meta property="og:url" content="http://0.0.0.0:3000/documentation/unity-basics.html" />
<meta property="og:site_name" content="U2PIA" />
<meta property="og:image" content="http://0.0.0.0:3000/unity/unity.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-25T00:00:00-06:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","image":"http://0.0.0.0:3000/unity/unity.png","url":"http://0.0.0.0:3000/documentation/unity-basics.html","headline":"유니티 3D - 기본","dateModified":"2018-12-25T00:00:00-06:00","datePublished":"2018-12-25T00:00:00-06:00","author":{"@type":"Person","name":"Wook Hyun"},"description":"거의 생초짜가 전문강사님의 강의를 듣고 다시 해 보며 부딪혀 본 내용을 기록한 것입니다. 백문이 불여일견입니다. 책 아무리 들여다보는 것 보다, 직접 하는 것이 낫고.. 혼자 하는 것 보다 전문가의 도움을 받는 것이 훨씬 시간을 절약합니다.","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:3000/documentation/unity-basics.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


</head>


<body>

<div class="container">
  <header class="site-header">
  <h3 class="site-title">
    <a href="/">U2PIA</a>
  </h3>
  <nav class="menu-list">
    
      <a href="/pages/articles.html" class="menu-link">Articles</a>
    
      <a href="/pages/resources.html" class="menu-link">Learning Resources</a>
    
      <a href="/pages/upcoming.html" class="menu-link">Upcoming</a>
    
      <a href="/pages/documentation.html" class="menu-link">Documentation</a>
    
      <a href="/pages/tips.html" class="menu-link">Tips</a>
    
      <a href="/pages/about.html" class="menu-link">About</a>
    
      <a href="/pages/contact.html" class="menu-link">Contact</a>
    

    
      <a href="mailto:superwhyun3@gmail.com" class="menu-link" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    
      <a href="feed.xml" class="menu-link" target="_blank"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
    
  </nav>
  <div class="dropdown">
    <button class="dropbtn"><i class="fa fa-bars" aria-hidden="true"></i></button>
    <div class="dropdown-content">
      
        <a href="/pages/articles.html" class="menu-link">Articles</a>
      
        <a href="/pages/resources.html" class="menu-link">Learning Resources</a>
      
        <a href="/pages/upcoming.html" class="menu-link">Upcoming</a>
      
        <a href="/pages/documentation.html" class="menu-link">Documentation</a>
      
        <a href="/pages/tips.html" class="menu-link">Tips</a>
      
        <a href="/pages/about.html" class="menu-link">About</a>
      
        <a href="/pages/contact.html" class="menu-link">Contact</a>
      

      
        <a href="mailto:superwhyun3@gmail.com" class="menu-link" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
      
        <a href="feed.xml" class="menu-link" target="_blank"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
      
    </div>
  </div>
</header>

  <div class="posts-wrapper">
    <div class="page-content">
  <h1>
    유니티 3D - 기본
  </h1>

  <span class="post-date">
    Written on
    
    December
    25th,
    2018
    by
    
      Wook Hyun
    
  </span>

  
    <div class="featured-image">
      <img src="/assets/img/unity/unity.png">
    </div>
  

  <article>
    <p>거의 생초짜가 전문강사님의 강의를 듣고 다시 해 보며 부딪혀 본 내용을 기록한 것입니다.
백문이 불여일견입니다. 책 아무리 들여다보는 것 보다, 직접 하는 것이 낫고..
혼자 하는 것 보다 전문가의 도움을 받는 것이 훨씬 시간을 절약합니다.</p>

<p>@한동안 다른 일 하다가 다시 하려니 기억이 삭~ 날라갔네…워매…</p>

<h1 id="기본-개념">기본 개념</h1>

<ul>
  <li>Component</li>
  <li>GameObject
    <ul>
      <li>모든 구성요소의 기본이 됨.</li>
      <li>Transform 컴퍼넌트를 모두 가지고 있음.</li>
    </ul>
  </li>
  <li>Scripts
    <ul>
      <li>Script와 UI 연계를 위한 직렬화 (Public 변수 선언 등을 통해)가 가능함
        <ul>
          <li>즉, Script의 C# 코드에서 선언한 변수를 Unity UI에서 제어할 수 있음</li>
        </ul>
      </li>
      <li>C#, JavaScript로 제어가능하다.</li>
    </ul>
  </li>
  <li>많이 쓰는 변수
    <ul>
      <li>Vector3
        <ul>
          <li>Vector3.forward = new Vector3(0,0,1)</li>
          <li>Vector3.up = new Vector3(0,1,0)</li>
          <li>Vector3.right = new Vector3(1,0,0)</li>
          <li>Vector3.one = new Vector3(1,1,1)</li>
          <li>Vector3.zero = new Vector3(0,0,0)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h1 id="각종-사용-방법">각종 사용 방법</h1>

<h2 id="기본제어">기본제어</h2>

<h3 id="이동">이동</h3>

<p>아래 함수는 키보드 (WASD) 와 마우스 ( 좌우 ) 를 이용해 캐릭터를 이동시키는 코드이다 .</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">void</span> <span class="nf">Update</span> <span class="p">()</span> <span class="p">{</span>

        <span class="c1">// Input class 는 외부로부터의 모든 입력을 관장 ( 키보드 , 마우스 , 터치 , ...)</span>

        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Vertical"</span> <span class="p">);</span> <span class="c1">// up/down/w/s 입력값을 받아옴 , -1.0 ~ 0.0 ~ +1.0 사이의 값을 가져옴 .</span>
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Horizontal"</span> <span class="p">);</span>
        <span class="kt">float</span> <span class="n">r</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Mouse X"</span> <span class="p">);</span> <span class="c1">// 마우스 좌우 변위값</span>


        <span class="cm">/* Method 3 */</span>
        <span class="n">Vector3</span> <span class="n">moveDir</span> <span class="p">=</span> <span class="p">(</span> <span class="n">Vector3</span> <span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">v</span><span class="p">)</span> <span class="p">+</span> <span class="p">(</span> <span class="n">Vector3</span> <span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">h</span><span class="p">);</span>
        <span class="n">tr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="n">moveDir</span><span class="p">.</span><span class="n">normalized</span> <span class="p">*</span> <span class="n">Time</span> <span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">6.0f</span> <span class="p">);</span> <span class="c1">// 전 frame 과 그 다음 frame 의 시간차</span>
        <span class="n">tr</span><span class="p">.</span><span class="nf">Rotate</span><span class="p">(</span> <span class="n">Vector3</span> <span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">Time</span> <span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">120.0f</span> <span class="p">*</span> <span class="n">r</span><span class="p">);</span>

    <span class="p">}</span> 
</code></pre></div></div>

<h3 id="입력">입력</h3>

<p>키보드에서 입력 받아오기</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Vertical"</span> <span class="p">);</span> <span class="c1">// up/down/w/s 입력값을 받아옴 , -1.0 ~ 0.0 ~ +1.0 사이의 값을 가져옴 .</span>
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Horizontal"</span> <span class="p">);</span> 
</code></pre></div></div>

<p>마우스 좌우 변위 가져오기</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="kt">float</span> <span class="n">r</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Mouse X"</span> <span class="p">);</span> <span class="c1">// 마우스 좌우 변위값   </span>
</code></pre></div></div>

<hr />

<h2 id="모델링-기본">모델링 기본</h2>

<h3 id="rigidbody">RigidBody</h3>

<ul>
  <li>중력(물리)모델을 적용하기 위해 필요한 Component.</li>
</ul>

<h3 id="collision">Collision</h3>
<ul>
  <li>TBD</li>
</ul>

<h3 id="texture">Texture</h3>

<ul>
  <li>색상, 질감등을 입히기 위한 것.</li>
  <li>3D 모델에 텍스쳐를 입히려면, Material 로 만든 이후에 해야 한다.</li>
  <li>단순한 색상을 입힐 수도 있고, 이미지도 입힐 수 있다.</li>
  <li>Create-&gt;Material 을 통해 ‘FloorTile’이란 이름으로 하나 만들고, floor 이미지를 끌어다 Inspect의 Albedo 왼쪽 사각형에 놓으면 된다.</li>
</ul>

<p><img src="../assets/img/unity/1.png" alt="this screenshot" /></p>

<p>이제 이 FloorTile Material을 바닥으로 끌어다 놓자. 
그럼 아래처럼 보인다. 다만, 타일을 stretch하기 때문에 이쁘지 않다.</p>

<p><img src="../assets/img/unity/2.png" alt="this screenshot" /></p>

<p>그럼 이렇게 해 보자. 
<img src="../assets/img/unity/3.png" alt="this screenshot" /></p>

<p>그럼 이렇게 보인다. 
<img src="../assets/img/unity/4.png" alt="this screenshot" /></p>

<p>쫌 이쁘지 아니한가?</p>

<hr />

<h2 id="scene-전환">Scene 전환</h2>

<p>Scene을 여러 개 두고 전환하기 위해서는 다음 코드를 사용하며, 전환 방식에 따라 다양한 코드의 변형이 있을 수 있다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">UnityEngine.SceneManagement</span><span class="p">;</span>
 	<span class="k">void</span> <span class="nf">LoadScene</span><span class="p">()</span>
 	<span class="p">{</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="s">"SampleScene"</span> <span class="p">);</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="m">1</span> <span class="p">);</span>

        <span class="c1">// 중첩해서 신을 호출하는 경우</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="m">1</span> <span class="p">,</span> <span class="n">LoadSceneMode</span> <span class="p">.</span><span class="n">Additive</span><span class="p">);</span>

        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadSceneAsync</span><span class="p">()</span> <span class="c1">// CoRoutine 으로 숨겨서 로딩하고 다 받아지면 넘어가는 ..</span>
    <span class="p">}</span>
</code></pre></div></div>

<h3 id="기본-전환">기본 전환</h3>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="s">"SampleScene"</span> <span class="p">);</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="m">1</span> <span class="p">);</span> 

</code></pre></div></div>

<h3 id="중첩-scene">중첩 Scene</h3>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="c1">// 중첩해서 신을 호출하는 경우</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="m">1</span> <span class="p">,</span> <span class="n">LoadSceneMode</span> <span class="p">.</span><span class="n">Additive</span><span class="p">);</span> 
</code></pre></div></div>

<h3 id="비동기-로딩">비동기 로딩</h3>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadSceneAsync</span><span class="p">()</span> <span class="c1">// CoRoutine 으로 숨겨서 로딩하고 다 받아지면 넘어가는 .. </span>

</code></pre></div></div>

<hr />

<h2 id="카메라-제어">카메라 제어</h2>

<h3 id="카메라가-플레이어를-따라-오도록-하기">카메라가 플레이어를 따라 오도록 하기</h3>

<p>Script 를 하나 만들고 이름은 CameraSmoothFollow 라고 짓는다 . 그리고 아래 코드를 그냥 복붙하자.  참고로, 클래스명은 Script 명과 동일하게 해 줘야 한다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">UnityStandardAssets.Utility</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">CameraSmoothFollow</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
    <span class="p">{</span>

        <span class="c1">// The target we are following</span>
        <span class="p">[</span> <span class="n">SerializeField</span> <span class="p">]</span>
        <span class="k">private</span> <span class="n">Transform</span> <span class="n">target</span><span class="p">;</span>
        <span class="c1">// The distance in the x-z plane to the target</span>
        <span class="p">[</span> <span class="n">SerializeField</span> <span class="p">]</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">distance</span> <span class="p">=</span> <span class="m">10.0f</span> <span class="p">;</span>
        <span class="c1">// the height we want the camera to be above the target</span>
        <span class="p">[</span> <span class="n">SerializeField</span> <span class="p">]</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">height</span> <span class="p">=</span> <span class="m">5.0f</span> <span class="p">;</span>

        <span class="p">[</span> <span class="n">SerializeField</span> <span class="p">]</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">rotationDamping</span><span class="p">;</span>
        <span class="p">[</span> <span class="n">SerializeField</span> <span class="p">]</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">heightDamping</span><span class="p">;</span>

        <span class="c1">// Use this for initialization</span>
        <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

        <span class="c1">// Update is called once per frame</span>
        <span class="k">void</span> <span class="nf">LateUpdate</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Early out if we don't have a target</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">target</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">;</span>

            <span class="c1">// Calculate the current rotation angles</span>
            <span class="kt">var</span> <span class="n">wantedRotationAngle</span> <span class="p">=</span> <span class="n">target</span><span class="p">.</span><span class="n">eulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">wantedHeight</span> <span class="p">=</span> <span class="n">target</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">height</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">currentRotationAngle</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">eulerAngles</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">currentHeight</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>

            <span class="c1">// Damp the rotation around the y-axis</span>
            <span class="n">currentRotationAngle</span> <span class="p">=</span> <span class="n">Mathf</span> <span class="p">.</span><span class="nf">LerpAngle</span><span class="p">(</span><span class="n">currentRotationAngle</span><span class="p">,</span> <span class="n">wantedRotationAngle</span><span class="p">,</span> <span class="n">rotationDamping</span> <span class="p">*</span> <span class="n">Time</span> <span class="p">.</span><span class="n">deltaTime</span><span class="p">);</span>

            <span class="c1">// Damp the height</span>
            <span class="n">currentHeight</span> <span class="p">=</span> <span class="n">Mathf</span> <span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">currentHeight</span><span class="p">,</span> <span class="n">wantedHeight</span><span class="p">,</span> <span class="n">heightDamping</span> <span class="p">*</span> <span class="n">Time</span> <span class="p">.</span><span class="n">deltaTime</span><span class="p">);</span>

            <span class="c1">// Convert the angle into a rotation</span>
            <span class="kt">var</span> <span class="n">currentRotation</span> <span class="p">=</span> <span class="n">Quaternion</span> <span class="p">.</span><span class="nf">Euler</span><span class="p">(</span> <span class="m">0</span> <span class="p">,</span> <span class="n">currentRotationAngle</span><span class="p">,</span> <span class="m">0</span> <span class="p">);</span>

            <span class="c1">// Set the position of the camera on the x-z plane to:</span>
            <span class="c1">// distance meters behind the target</span>
            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">target</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-=</span> <span class="n">currentRotation</span> <span class="p">*</span> <span class="n">Vector3</span> <span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">distance</span><span class="p">;</span>

            <span class="c1">// Set the height of the camera</span>
            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">currentHeight</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>

            <span class="c1">// Always look at the target</span>
            <span class="n">transform</span><span class="p">.</span><span class="nf">LookAt</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>



</code></pre></div></div>

<p>그리고, UI 로 돌아오자. 그리고, 만든 스크립트를 Main Camera 에 끌어다가 child 화 시킨다.</p>

<p><img src="../assets/img/unity/5.png" alt="this screenshot" /></p>

<p>여기서 카메라가 따라다닐 Target 을 정해줘야 하는데, Player를 따라다니게 하려면 Player의 Transform 좌표값을 받아올 수 있어야 하므로, 
Target에 Player를 할당해 주도록 하자. 
그리고, Distance를 적당히 잡아주고, 거리(Distance)는 3.5m 정도, Height는 사람의 눈높이로 1.78을 둔다. 
Rotation/Height Damping 등은 잘 모르겠다.</p>

<p>다만, 아래처럼 나올거다.</p>

<p><img src="../assets/img/unity/6.png" alt="this screenshot" /></p>

<p>카메라가 따라 다닐 오브젝트를 하나 만들어 Player에게 달아주는 식으로 해결할 수 있다. Player 밑에 GameObject 를 하나 달아주자.</p>

<p><img src="../assets/img/unity/7.png" alt="this screenshot" /></p>

<p>이 피봇의 위치를 머리의 눈 높이 위치로 옮겨주고, 모양이 잘 보이지 않으니 Gizmo를 달아주자.</p>

<p>먼저 inspector의 좌측 최상단에 있는 형형색색 큐브모양을 눌러서 원하는 모양을 달아주자.</p>

<p><img src="../assets/img/unity/8.png" alt="this screenshot" /></p>

<p>그럼 아래처럼 보인다 .</p>

<p><img src="../assets/img/unity/9.png" alt="this screenshot" /></p>

<p>Main Camera의 Camera Smooth Follow 컴퍼넌트의 Target을 얘로 바꿔주자.</p>

<p><img src="../assets/img/unity/10.png" alt="this screenshot" /></p>

<p>자, 아까와는 조금 다른 모습이다.</p>

<p><img src="../assets/img/unity/11.png" alt="this screenshot" /></p>

<hr />

<h2 id="기즈모gizmo-다루기">기즈모(Gizmo) 다루기</h2>

<p>기본적으로 제공하는 시스템 기즈모를 사용할 수도 있고, 자체적으로 만들어 사용할 수도 있다. 
주로 대규모 인원이 투입되는 경우에 유용하다.</p>

<p>먼저, 스크립트를 하나 만들자. MyGizmos 라고 이름을 지어보자. 
그리고 아래처럼 입력하자.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MyGizmos</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">public</span> <span class="n">Color</span> <span class="n">_color</span> <span class="p">=</span> <span class="n">Color</span> <span class="p">.</span><span class="n">blue</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">_radius</span> <span class="p">=</span> <span class="m">0.2f</span> <span class="p">;</span>

    <span class="k">void</span> <span class="nf">OnDrawGizmos</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Gizmos</span> <span class="p">.</span><span class="n">color</span> <span class="p">=</span> <span class="n">_color</span><span class="p">;</span>
        <span class="n">Gizmos</span> <span class="p">.</span><span class="nf">DrawSphere</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">_radius</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<p>그리고, 원하는 GameObject 에 할당한다. 그럼 위처럼 보인다 . 색상이나 radius도 바꿀 수 있다.</p>

<p><img src="../assets/img/unity/12.png" alt="this screenshot" /></p>

<hr />

<h2 id="캐릭터-애니메이션-넣기">캐릭터 애니메이션 넣기</h2>

<p>캐릭터에 생명력을 불어넣는 애니메이션을 달기 위해서는 두 가지 방법이 있다. (Animation과 Animator)</p>

<h3 id="animation">Animation</h3>

<p>모델과 애니메이션이 분리된 경우에 사용된다.</p>

<p>먼저 모델을 프로젝트 panel에서 Hierarchy panel로 가져오고, 위치는 0,0,0으로 셋팅해준다. 
<img src="../assets/img/unity/13.png" alt="this screenshot" /></p>

<p>Player의 inspect에서 [Add Component] 버튼을 누르고, Animation을 추가한다.
<img src="../assets/img/unity/14.png" alt="this screenshot" /></p>

<p>그리고 난 뒤에 아래와 같이 셋팅한다 . Player 의 animation clip 을 element 에 할당해 준다. 
<img src="../assets/img/unity/15.png" alt="this screenshot" /></p>

<p>등록된 animation clip들 중 원하는 clip을 실행시키는 것은 script를 통해 이뤄지게 한다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>



<span class="na">[System.Serializable]</span> <span class="c1">//UI 에 노출되기 위해서는 직렬화해 줘야 함</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">PlayerAnim</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">AnimationClip</span> <span class="n">idle</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">AnimationClip</span> <span class="n">runF</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">AnimationClip</span> <span class="n">runB</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">AnimationClip</span> <span class="n">runL</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">AnimationClip</span> <span class="n">runR</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">AnimationClip</span> <span class="n">shoot</span><span class="p">;</span>

<span class="p">}</span>


<span class="k">public</span> <span class="k">class</span> <span class="nc">PlayerCtrl</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">private</span> <span class="n">Transform</span> <span class="n">tr</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Animation</span> <span class="n">anim</span><span class="p">;</span>

    <span class="k">public</span> <span class="n">PlayerAnim</span> <span class="n">playerAnim</span><span class="p">;</span>


    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span> <span class="p">{</span>

        <span class="n">tr</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span> <span class="n">Transform</span> <span class="p">&gt;();</span>
        <span class="n">anim</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span> <span class="n">Animation</span> <span class="p">&gt;();</span>

    <span class="p">}</span>


    <span class="k">void</span> <span class="nf">Update</span> <span class="p">()</span> <span class="p">{</span>

        <span class="c1">// Input class 는 외부로부터의 모든 입력을 관장 ( 키보드 , 마우스 , 터치 , ...)</span>

        <span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Vertical"</span> <span class="p">);</span> <span class="c1">// up/down/w/s 입력값을 받아옴 , -1.0 ~ 0.0 ~ +1.0 사이의 값을 가져옴 .</span>
        <span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Horizontal"</span> <span class="p">);</span>
        <span class="kt">float</span> <span class="n">r</span> <span class="p">=</span> <span class="n">Input</span> <span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span> <span class="s">"Mouse X"</span> <span class="p">);</span> <span class="c1">// 마우스 좌우 변위값</span>


        <span class="cm">/* Method 3 */</span>
        <span class="n">Vector3</span> <span class="n">moveDir</span> <span class="p">=</span> <span class="p">(</span> <span class="n">Vector3</span> <span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">v</span><span class="p">)</span> <span class="p">+</span> <span class="p">(</span> <span class="n">Vector3</span> <span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">h</span><span class="p">);</span>
        <span class="n">tr</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="n">moveDir</span><span class="p">.</span><span class="n">normalized</span> <span class="p">*</span> <span class="n">Time</span> <span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">6.0f</span> <span class="p">);</span> <span class="c1">// 전 frame 과 그 다음 frame 의 시간차</span>
        <span class="n">tr</span><span class="p">.</span><span class="nf">Rotate</span><span class="p">(</span> <span class="n">Vector3</span> <span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">Time</span> <span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">120.0f</span> <span class="p">*</span> <span class="n">r</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="p">&gt;=</span> <span class="m">0.1f</span> <span class="p">)</span> <span class="p">{</span>
            <span class="c1">// smooth 하게 animation 을 transition 해 줘야 함</span>

            <span class="n">anim</span><span class="p">.</span><span class="nf">CrossFade</span><span class="p">(</span><span class="n">playerAnim</span><span class="p">.</span><span class="n">runF</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="m">0.3f</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="n">v</span> <span class="p">&lt;=</span> <span class="p">-</span> <span class="m">0.1f</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">anim</span><span class="p">.</span><span class="nf">CrossFade</span><span class="p">(</span><span class="n">playerAnim</span><span class="p">.</span><span class="n">runB</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="m">0.3f</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="n">h</span> <span class="p">&gt;=</span> <span class="m">0.1f</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">anim</span><span class="p">.</span><span class="nf">CrossFade</span><span class="p">(</span><span class="n">playerAnim</span><span class="p">.</span><span class="n">runR</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="m">0.3f</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">h</span> <span class="p">&lt;=</span> <span class="p">-</span> <span class="m">0.1f</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">anim</span><span class="p">.</span><span class="nf">CrossFade</span><span class="p">(</span><span class="n">playerAnim</span><span class="p">.</span><span class="n">runL</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="m">0.3f</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="n">anim</span><span class="p">.</span><span class="nf">CrossFade</span><span class="p">(</span><span class="n">playerAnim</span><span class="p">.</span><span class="n">idle</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="m">0.3f</span> <span class="p">);</span>
        <span class="p">}</span>


    <span class="p">}</span>


<span class="p">}</span>

</code></pre></div></div>

<p>다시 UI 로 돌아와서 아래처럼 셋팅한다.</p>

<p><img src="../assets/img/unity/16.png" alt="this screenshot" /></p>

<p>Animation 컴퍼넌트에도 클립을 등록했는데, 여기에서 또 해줘야 하는데.. 둘 간의 연관관계가 무엇인지는 모르겠으나,  Animation 컴퍼넌트를 disable (uncheck) 하고 플레이를 하면, 애니메이션 동작이 이뤄지지 않는다.</p>

<h3 id="animator">Animator</h3>

<p>모델에 애니메이션이 포함된 경우(mecanim)</p>

<hr />

<h2 id="타임라인timeline-활용">타임라인(Timeline) 활용</h2>

<p>주로 Cinematic 영상을 만들 때 사용하는 방법.</p>

<p>먼저 Windows-&gt;Package Manager 에서 Cinemachine 을 설치한다.</p>

<p><img src="../assets/img/unity/23.png" alt="this screenshot" /></p>

<p>설치된 패키지들은 해당 프로젝트에서만 유효하다. 즉 , 프로젝트마다 필요할 경우 설치 하면 된다.</p>
<ol>
  <li>모델을 적당히 배치한다.</li>
  <li>메인카메라를 선택하고, 메뉴의 Component-&gt;Cinemachine을 추가한다. 
<img src="../assets/img/unity/24.png" alt="this screenshot" /></li>
</ol>

<p>Main Camera 에 대한 inspector 를 보면 다음과 같이 컴퍼넌트가 추가되어 있을 것이다. 
<img src="../assets/img/unity/25.png" alt="this screenshot" /></p>

<p>여기까지만 하면 된다 . 
참고로, Live Camera에 아무것도 할당되어 있지 않아 있다. 나중에 Virtual Camera 설치하면 바뀔거다.</p>

<p><img src="../assets/img/unity/26.png" alt="this screenshot" /></p>

<p>Cinemachine-&gt;Create Virtual Camera 를 통해 가상 카메라 설치하자 . 그리고 적당한 위치로 옮겨준다.</p>

<p><img src="../assets/img/unity/27.png" alt="this screenshot" /></p>

<p>그러면, inspector가 위처럼 보일 거다. 아래처럼 바꿔주자. Lens-&gt;Field Of View 를 수정하면 카메라의 줌 효과가 있다. 작을수록 더 댕겨진다. Aim 에서 Dead Zone Width/Height를 조정한다. 카메라가 이동하는 기준점을 잡아준다. Tracked Object Offset의 Y값을 위로 올려준다.</p>

<p><img src="../assets/img/unity/28.png" alt="this screenshot" /></p>

<p>그럼 위 처럼 된다 . Preview 화면을 보면 다음과 같이 생길거다 .</p>

<p><img src="../assets/img/unity/29.png" alt="this screenshot" /></p>

<p>가상 카메라를 몇 개 더 달아주고 위의 과정을 반복한다.
Project-&gt;Create-&gt;Timeline을 해주고, 걔를 D&amp;D로 Hierarchy 의 모델에다가 추가한다.</p>

<p><img src="../assets/img/unity/30.png" alt="this screenshot" /></p>

<p>그러면 inspect 에 자동으로 Playable Director 컴퍼넌트가 추가 되고, Playable에 Timeline이 맵핑된다. 이제 Timeline을 손대보자. 더블클릭.</p>

<p><img src="../assets/img/unity/31.png" alt="this screenshot" /></p>

<p>처음엔 아무것도 없을것이다. 여기다가 Animation Track을 Add 하자. 그리고 좌측위쪽 버튼(아래화살표+작대기 세개)을 눌러 애니메이션을 추가해보자.</p>

<p><img src="../assets/img/unity/32.png" alt="this screenshot" /></p>

<p>적당한 녀석을 선택하자. 이걸 반복한다.
<img src="../assets/img/unity/33.png" alt="this screenshot" /></p>

<p>그 다음에는 카메라 설치를 위해 Cinemachine 트랙을 추가하자. 
<img src="../assets/img/unity/34.png" alt="this screenshot" /></p>

<p>마찬가지로, 작대기화살표 버튼을 눌러 , virtual camera 를 추가한다. 
<img src="../assets/img/unity/35.png" alt="this screenshot" /></p>

<p>가상 카메라를 적절히 배치하자. 왼쪽부터 1-2-3.
<img src="../assets/img/unity/36.png" alt="this screenshot" /></p>

<p>주의할 점으로, 첫번째 카메라를 끌어다가 붙여줘야만 되더라.
대충 아래처럼 만들어보자.
<img src="../assets/img/unity/37.png" alt="this screenshot" /></p>

<p>그럼 정해진 시간에 맞춰 카메라가 전환된다. 
근데 요상스럽게, CM vcam1을 맨 마지막에 재사용 해 보려 했으나, 반응을 하지 않는다. 
왜 그런지 모르겠다. 오디오도 간간히 추가해주고 해 보자. 같은 로직이라 그닥 다를게 없다.</p>

<p><strong>TODO: Activation에 대한 것도 알아는 봐야 쓰겄다.</strong></p>

<hr />

<h2 id="오브젝트-풀링-object-pooling">오브젝트 풀링 (Object Pooling)</h2>

<ul>
  <li>오브젝트가 많은 경우 사전에 미리 로딩시켜 놓는 기법</li>
</ul>

<p>먼저 Script 를 하나 만들자. 이름을 GameManager로 한다. 이 파일 이름도 일종의 예약어이다. 프로젝트 panel에서 아이콘이 살짝 바뀌는 것을 알 수 있다. 
해당 코드를 열어 다음과 같이 코딩한다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">GameManager</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="p">[</span><span class="n">System</span><span class="p">.</span><span class="n">NonSerialized</span><span class="p">]</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="p">[]</span> <span class="n">points</span><span class="p">;</span>
    <span class="p">[</span><span class="n">System</span><span class="p">.</span><span class="n">NonSerialized</span><span class="p">]</span>
    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">monster</span><span class="p">;</span>

    <span class="p">[</span> <span class="nf">Range</span> <span class="p">(</span> <span class="m">5</span> <span class="p">,</span> <span class="m">20</span> <span class="p">)]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">maxPool</span> <span class="p">=</span> <span class="m">10</span> <span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">createTime</span> <span class="p">=</span> <span class="m">3.0f</span> <span class="p">;</span>

    <span class="k">public</span> <span class="n">List</span> <span class="p">&lt;</span> <span class="n">GameObject</span> <span class="p">&gt;</span> <span class="n">monsterPool</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span> <span class="p">&lt;</span> <span class="n">GameObject</span> <span class="p">&gt;();</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="n">isGameOver</span> <span class="p">=</span> <span class="k">false</span> <span class="p">;</span>


 	<span class="c1">// Use this for initialization</span>
 	<span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span> <span class="p">{</span>

        <span class="n">monster</span> <span class="p">=</span> <span class="n">Resources</span> <span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span> <span class="n">GameObject</span> <span class="p">&gt;(</span> <span class="s">"Prefabs/monster"</span> <span class="p">);</span>
        <span class="n">points</span> <span class="p">=</span> <span class="n">GameObject</span> <span class="p">.</span><span class="nf">Find</span><span class="p">(</span> <span class="s">"SpawnPointGroup"</span> <span class="p">).</span><span class="n">GetComponentsInChildren</span><span class="p">&lt;</span> <span class="n">Transform</span> <span class="p">&gt;();</span> <span class="c1">//find 는 순차검색이라 절대 update 함수에서는 사용되어서는 안된다</span>

        <span class="nf">CreatePool</span><span class="p">();</span>
        <span class="nf">StartCoroutine</span><span class="p">(</span><span class="nf">CreateMonster</span><span class="p">());</span>
 	<span class="p">}</span>

    <span class="k">void</span> <span class="nf">CreatePool</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span> <span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">maxPool</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">GameObject</span> <span class="n">_monster</span><span class="p">=</span> <span class="nf">Instantiate</span><span class="p">(</span><span class="n">monster</span><span class="p">,</span> <span class="k">this</span> <span class="p">.</span><span class="n">transform</span><span class="p">);</span>
            <span class="n">_monster</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Monster_"</span> <span class="p">+</span> <span class="n">i</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span> <span class="s">"00"</span> <span class="p">);</span>

            <span class="n">_monster</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span> <span class="k">false</span> <span class="p">);</span>
            <span class="n">monsterPool</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">_monster</span><span class="p">);</span>

        <span class="p">}</span>

    <span class="p">}</span>

    <span class="n">IEnumerator</span> <span class="nf">CreateMonster</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">while</span> <span class="p">(!</span><span class="n">isGameOver</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span> <span class="p">(</span><span class="n">createTime</span><span class="p">);</span>

            <span class="k">foreach</span> <span class="p">(</span> <span class="n">GameObject</span> <span class="n">_monster</span> <span class="k">in</span> <span class="n">monsterPool</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">_monster</span><span class="p">.</span><span class="n">activeSelf</span> <span class="p">==</span> <span class="k">false</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="kt">int</span> <span class="n">idx</span> <span class="p">=</span> <span class="n">Random</span> <span class="p">.</span><span class="nf">Range</span><span class="p">(</span> <span class="m">1</span> <span class="p">,</span> <span class="n">points</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                    <span class="n">_monster</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">points</span><span class="p">[</span><span class="n">idx</span><span class="p">].</span><span class="n">position</span><span class="p">;</span>
                    <span class="n">_monster</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span> <span class="k">true</span> <span class="p">);</span>
                    <span class="k">break</span> <span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>


</code></pre></div></div>

<p>Hierarchy 화면에서 GameObject를 하나 만든다. 이름은 GameManager로 하고, 좀 전에 만든 스크립트를 여기에 끌어다 놓는다.</p>

<p><img src="../assets/img/unity/17.png" alt="this screenshot" /></p>

<hr />

<h2 id="정적-라이트맵-static-lightmap">정적 라이트맵 (Static Lightmap)</h2>

<p>조명 계산을 미리 해 놓아 성능 향상을 꾀하는 방법.</p>

<h3 id="occlusion">Occlusion</h3>

<p>객체에 가려 보이지 않는 부분은 렌더링이 되지 않도록 하는 방식</p>

<h4 id="occluder">Occluder</h4>

<h4 id="occludee">Occludee</h4>

<hr />

<h2 id="애셋-번들">애셋 번들</h2>

<h3 id="애셋-번들링">애셋 번들링</h3>

<h4 id="c-스크립트를-이용하는-방법">C# 스크립트를 이용하는 방법</h4>

<p><img src="../assets/img/unity/22.png" alt="this screenshot" /></p>

<p>Assets 폴더 밑에 Editor라는 폴더를 만든다. 여기서 Editor는 UI의 예약어로 반드시 이 이름의 폴더를 만들어야 한다. 그 밑에 C# 스크립트를 만든다. 이름은 아무거나 상관없다. 
그리고 아래와 같이 코드를 입력한다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEditor</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CreateAssetBundles</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="p">[</span> <span class="nf">MenuItem</span> <span class="p">(</span> <span class="s">"Assets/Build Asset Bundles"</span> <span class="p">)]</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">BuildAssetBundles</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">BuildPipeline</span> <span class="p">.</span><span class="nf">BuildAssetBundles</span><span class="p">(</span> <span class="s">"Assets/AssetBundles"</span> <span class="p">,</span> <span class="n">BuildAssetBundleOptions</span> <span class="p">.</span><span class="n">None</span><span class="p">,</span> <span class="n">BuildTarget</span> <span class="p">.</span><span class="n">Android</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<h4 id="assetbundler-툴킷을-이용하는-방법">AssetBundler 툴킷을 이용하는 방법</h4>

<p><img src="../assets/img/unity/18.png" alt="this screenshot" />
Package Manager 에서 추가 툴킷 (AssetBundle) 을 설치하면 , 위와 같이 AssetBundle Browser 메뉴가 나온다 . 
<img src="../assets/img/unity/19.png" alt="this screenshot" />
Project 화면에서 번들하고자 하는 모델을 선택한다 . (Prefab 선택 ) 
그리고 , inspector 화면의 preview 밑 제일 하단에 아래와 같이 한다 
<img src="../assets/img/unity/20.png" alt="this screenshot" /></p>

<p>AssetBundler 의 New 를 선택하여 name 값을 입력하고 , subname 을 입력한다 .  여기서 name 은 ‘model’, subname 은 ‘knight’ 이다 . 나중에 AssetBundler 로 bundle 하면 , model.knight 라는 파일이 생긴다 . Windows-&gt;AssetBundler Browser 를 실행한다 . 
<img src="../assets/img/unity/21.png" alt="this screenshot" /></p>

<p>Build Target 을 선택하고 , Output path 를 지정한 이후 Build 버튼을 누른다.
끝 .</p>

<h3 id="번들-애셋-로딩">번들 애셋 로딩</h3>

<ul>
  <li>스크립트를 만들고 GameObject 아무 것에나 할당하면 됨.</li>
  <li>참고로 Start() 함수도 CoRoutine으로 호출 가능함</li>
</ul>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">LoadAssetBundles</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>


    <span class="k">public</span> <span class="kt">string</span> <span class="n">url</span> <span class="p">=</span> <span class="s">"http://www.etri.re.kr/cdn/model.knight"</span> <span class="p">;</span>  <span class="c1">// 이런 경로에 있다고 가정 하자</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">version</span> <span class="p">=</span> <span class="m">1</span> <span class="p">;</span> <span class="c1">// remote service</span>

     <span class="c1">// Use this for initialization</span>
    <span class="n">IEnumerator</span> <span class="nf">Start</span> <span class="p">()</span> <span class="p">{</span>

        <span class="n">WWW</span> <span class="n">www</span> <span class="p">=</span> <span class="n">WWW</span> <span class="p">.</span><span class="nf">LoadFromCacheOrDownload</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">);</span>
        <span class="k">yield</span> <span class="k">return</span> <span class="n">www</span><span class="p">;</span>

        <span class="n">AssetBundle</span> <span class="n">ab</span> <span class="p">=</span> <span class="n">www</span><span class="p">.</span><span class="n">assetBundle</span><span class="p">;</span>
        <span class="n">GameObject</span> <span class="n">obj</span> <span class="p">=</span> <span class="nf">Instantiate</span><span class="p">(</span><span class="n">ab</span><span class="p">.</span><span class="nf">LoadAsset</span><span class="p">(</span> <span class="s">"model.knight"</span> <span class="p">))</span> <span class="k">as</span> <span class="n">GameObject</span> <span class="p">;</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">LoadScene</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="s">"SampleScene"</span> <span class="p">);</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="m">1</span> <span class="p">);</span>

        <span class="c1">// 중첩해서 신을 호출하는 경우</span>
        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span> <span class="m">1</span> <span class="p">,</span> <span class="n">LoadSceneMode</span> <span class="p">.</span><span class="n">Additive</span><span class="p">);</span>

        <span class="n">SceneManager</span> <span class="p">.</span><span class="nf">LoadSceneAsync</span><span class="p">()</span> <span class="c1">// CoRoutine 으로 숨겨서 로딩하고 다 받아지면 넘어가는 ..</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>


  </article>

  
  <div id="disqus_thread"></div>
  <script>
  
  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  /*
  var disqus_config = function () {
  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://superwhyun.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                           



  <div class="post-share">
    <div class="post-date">Feel free to share!</div>
    <div class="sharing-icons">
      <a href="https://twitter.com/intent/tweet?text=유니티 3D - 기본&amp;url=/documentation/unity-basics.html" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/documentation/unity-basics.html&amp;title=유니티 3D - 기본" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
      <a href="https://plus.google.com/share?url=/documentation/unity-basics.html" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
    </div>
  </div>

  <div class="related">
    <h2>You may also enjoy...</h2>
    
    <ul class="related-posts">
      
        
          
            <li>
              <h3>
                <a href="/documentation/unity-example.html">
                  <div class="related-thumbnail">
                    
                      <img src="http://0.0.0.0:3000/assets/img/unity/unity.png">
                    
                  </div>
                  <div class="related-title">
                    유니티 3D - 예제
                  </div>
                  <!--<small>December 25, 2018</small>-->
                </a>
              </h3>
            </li>
            
          
        
          
          
        
      
    </ul>
  </div>

  

</div>

  </div>
  <footer class="footer">
  
    <a href="mailto:superwhyun3@gmail.com" class="menu-link" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
  
    <a href="feed.xml" class="menu-link" target="_blank"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
  
  <div class="post-date"><a href="/">U2PIA | Joy of learning by Wook Hyun</a></div>
</footer>

</div>

</body>
</html>
